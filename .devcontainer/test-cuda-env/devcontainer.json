// For format details, see https://aka.ms/devcontainer.json. 
{
	// 在pytorch开发镜像的基础上配置了rust的编译工具
	"name": "tch-rs-test-cuda-env",
	// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
	"build": {
		"dockerfile": "Dockerfile",
		// 修改 docker build的路径,方便将需要执行的脚本一次性拷贝到镜像中
		"context": ".."
	},
	"runArgs": [
		"--gpus=all",
		"--ipc=host"
	],
	"postStartCommand": "export CARGO_TEST_CUDA_DEVICE_COUNT=2 && cargo test",
	"hostRequirements": {
		"gpu": true
	}
}